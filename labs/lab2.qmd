---
title: "Lab 2: Multiplexed 7-Segment Display"
description: "Implementation of a multiplexed 7-segment display system, learning about time-division multiplexing and display control techniques"
author: "Emmett Stralka"
date: "2024-08-29"
categories:
  - embedded-systems
  - display-systems
  - multiplexing
  - lab-report
draft: false
---

# Lab 2: Multiplexed 7-Segment Display

**Implementation of a multiplexed 7-segment display system, learning about time-division multiplexing and display control techniques**

---

## Overview

Lab 2 focuses on implementing a multiplexed 7-segment display system using time-division multiplexing techniques. This lab teaches students about display control algorithms, multiplexing strategies, and the challenges of managing multiple display segments efficiently.

### Learning Objectives
- Understand 7-segment display operation and segment mapping
- Implement time-division multiplexing for multiple digits
- Design efficient display update algorithms
- Optimize timing for flicker-free operation
- Master hardware interface control for display systems

## Step-by-Step Procedure

### 1. Hardware Setup
- Connect 7-segment display modules to microcontroller GPIO pins
- Wire digit selection lines for multiplexing control
- Verify proper power supply and current limiting resistors
- Test individual segment functionality

### 2. Segment Mapping
- Create lookup table for digit patterns (0-9)
- Map segment letters (a-g) to corresponding GPIO pins
- Implement segment pattern encoding for efficient storage
- Test pattern display for all digits

### 3. Multiplexing Implementation
- Design time-division multiplexing algorithm
- Implement digit selection and segment control
- Set up timer interrupt for consistent refresh rate
- Optimize timing to prevent visible flicker

### 4. Display Control System
- Create display buffer for storing current values
- Implement update functions for changing displayed numbers
- Add support for decimal points and special characters
- Test with various number combinations

## Technical Implementation

The multiplexed display system uses time-division multiplexing to control multiple 7-segment displays with a limited number of GPIO pins. Key technical aspects include:

- **Segment Control**: Direct GPIO manipulation for individual segment control
- **Digit Selection**: Time-multiplexed digit enable/disable for display selection
- **Refresh Rate**: Timer-based updates to maintain flicker-free operation
- **Buffer Management**: Efficient storage and update of display values

## Performance Optimization

Critical optimization techniques for the multiplexed display:
- **Optimal Refresh Rate**: Balance between flicker prevention and processor overhead
- **Efficient Pattern Storage**: Lookup tables for fast digit pattern retrieval
- **Minimal GPIO Operations**: Reduce unnecessary pin state changes
- **Interrupt-Driven Updates**: Consistent timing without blocking main program flow

## Testing and Validation

### Functional Tests
- **Individual Digit Test**: Verify each digit displays correctly
- **Pattern Test**: Confirm all digits 0-9 display proper patterns
- **Multiplexing Test**: Ensure smooth switching between digits
- **Flicker Test**: Verify no visible flicker at normal viewing distance

### Performance Tests
- **Refresh Rate Measurement**: Confirm consistent update timing
- **Current Consumption**: Monitor power usage during operation
- **Temperature Test**: Verify stable operation over extended periods

## Troubleshooting Guide

- **Segments not lighting**:
    - Check GPIO pin configuration and connections
    - Verify power supply and current limiting resistors
    - Test individual segment functionality
- **Flickering display**:
    - Adjust refresh rate timing
    - Check for timing conflicts in main program
    - Verify stable power supply
- **Incorrect digit patterns**:
    - Review segment mapping and lookup table
    - Check for bit order issues in pattern encoding
    - Verify GPIO pin assignments

## Resources and Documentation

- [E155 Labs Overview](https://hmc-e155.github.io/lab/)
- [Lab Specs](https://hmc-e155.github.io/lab/lab-specs.html) (Placeholder for actual lab specs)
- 7-Segment Display Datasheet
- Microcontroller GPIO Reference Manual

## Expected Outcomes

Upon successful completion of Lab 2, students will have implemented a fully functional multiplexed 7-segment display system with flicker-free operation, efficient update algorithms, and proper hardware interface control. This foundation is essential for future display-based projects and user interface development.